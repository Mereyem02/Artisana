{% extends 'base.html.twig' %}

{% block title %}Modifier Coopérative - Artisana.ma{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('css/cooperative_form.css') }}">
{% endblock %}

{% block body %}
<div class="container cooperative-form-container">
    <div class="page-header">
        <h1><i class="fas fa-edit"></i> Modifier la Coopérative</h1>
        <p>{{ cooperative.nom }}</p>
    </div>

    <div class="card">
        {{ form_start(form, {'attr': {'id': 'cooperative-admin-form', 'class': 'js-confirm-submit', 'enctype': 'multipart/form-data', 'novalidate': 'novalidate', 'data-title': 'Confirmer la modification', 'data-text': 'Êtes-vous sûr de vouloir modifier cette coopérative ?', 'data-confirm-button': 'Oui, modifier'}}) }}
            {{ form_errors(form) }}
            <div class="cooperative-form-grid">
                <div class="form-group">
                    {{ form_label(form.nom, null, {'label_attr': {'class': 'form-label'}}) }}
                    {% set nom_attr = {'class': 'form-control'} %}
                    {% if not form.nom.vars.valid %}{% set nom_attr = nom_attr|merge({'class': nom_attr.class ~ ' is-invalid'}) %}{% endif %}
                    {{ form_widget(form.nom, {'attr': nom_attr}) }}
                    {% if not form.nom.vars.valid %}<div class="error-message">{{ form_errors(form.nom) }}</div>{% endif %}
                </div>

                <div class="form-group">
                    {{ form_label(form.description, null, {'label_attr': {'class': 'form-label'}}) }}
                    {% set desc_attr = {'class': 'form-control'} %}
                    {% if not form.description.vars.valid %}{% set desc_attr = desc_attr|merge({'class': desc_attr.class ~ ' is-invalid'}) %}{% endif %}
                    {{ form_widget(form.description, {'attr': desc_attr}) }}
                    {% if not form.description.vars.valid %}<div class="error-message">{{ form_errors(form.description) }}</div>{% endif %}
                </div>

                <div class="form-group">
                    {{ form_label(form.adresse, null, {'label_attr': {'class': 'form-label'}}) }}
                    {% set addr_attr = {'class': 'form-control'} %}
                    {% if not form.adresse.vars.valid %}{% set addr_attr = addr_attr|merge({'class': addr_attr.class ~ ' is-invalid'}) %}{% endif %}
                    {{ form_widget(form.adresse, {'attr': addr_attr}) }}
                    {% if not form.adresse.vars.valid %}<div class="error-message">{{ form_errors(form.adresse) }}</div>{% endif %}
                </div>

                <div class="cooperative-form-row">
                    <div class="form-group">
                        {{ form_label(form.telephone, null, {'label_attr': {'class': 'form-label'}}) }}
                        {% set tel_attr = {'class': 'form-control'} %}
                        {% if not form.telephone.vars.valid %}{% set tel_attr = tel_attr|merge({'class': tel_attr.class ~ ' is-invalid'}) %}{% endif %}
                        {{ form_widget(form.telephone, {'attr': tel_attr}) }}
                        {% if not form.telephone.vars.valid %}<div class="error-message">{{ form_errors(form.telephone) }}</div>{% endif %}
                    </div>

                    <div class="form-group">
                        {{ form_label(form.email, null, {'label_attr': {'class': 'form-label'}}) }}
                        {% set email_attr = {'class': 'form-control'} %}
                        {% if not form.email.vars.valid %}{% set email_attr = email_attr|merge({'class': email_attr.class ~ ' is-invalid'}) %}{% endif %}
                        {{ form_widget(form.email, {'attr': email_attr}) }}
                        {% if not form.email.vars.valid %}<div class="error-message">{{ form_errors(form.email) }}</div>{% endif %}
                    </div>
                </div>

                <div class="cooperative-form-row">
                    <div class="form-group">
                        {{ form_label(form.siteWeb, null, {'label_attr': {'class': 'form-label'}}) }}
                        {{ form_widget(form.siteWeb, {'attr': {'class': 'form-control ' ~ (not form.siteWeb.vars.valid ? 'is-invalid' : '')}}) }}
                        <div class="error-message">{{ form_errors(form.siteWeb) }}</div>
                    </div>

                    <div class="form-group">
                        {{ form_label(form.logo, 'Logo de la coopérative', {'label_attr': {'class': 'form-label'}}) }}
                        {% set logo_attr = {'class': 'form-control'} %}
                        {% if not form.logo.vars.valid %}{% set logo_attr = logo_attr|merge({'class': logo_attr.class ~ ' is-invalid'}) %}{% endif %}
                        {{ form_widget(form.logo, {'attr': logo_attr}) }}
                        {% if not form.logo.vars.valid %}<div class="error-message">{{ form_errors(form.logo) }}</div>{% endif %}
                    </div>
                </div>

                <div class="cooperative-form-row">
                    <div class="form-group">
                        {{ form_label(form.ville, 'Ville', {'label_attr': {'class': 'form-label'}}) }}
                        {% set ville_attr = {'class': 'form-control', 'placeholder': 'Ex: Fès'} %}
                        {% if not form.ville.vars.valid %}{% set ville_attr = ville_attr|merge({'class': ville_attr.class ~ ' is-invalid'}) %}{% endif %}
                        {{ form_widget(form.ville, {'attr': ville_attr}) }}
                        {% if not form.ville.vars.valid %}<div class="error-message">{{ form_errors(form.ville) }}</div>{% endif %}
                    </div>

                    <div class="form-group">
                        {{ form_label(form.region, 'Région', {'label_attr': {'class': 'form-label'}}) }}
                        {% set reg_attr = {'class': 'form-control', 'placeholder': 'Ex: Fès-Meknès'} %}
                        {% if not form.region.vars.valid %}{% set reg_attr = reg_attr|merge({'class': reg_attr.class ~ ' is-invalid'}) %}{% endif %}
                        {{ form_widget(form.region, {'attr': reg_attr}) }}
                        {% if not form.region.vars.valid %}<div class="error-message">{{ form_errors(form.region) }}</div>{% endif %}
                    </div>
                </div>

                <div class="cooperative-form-actions">
                    <a href="/cooperative/{{ cooperative.id }}" class="btn btn-secondary">
                        <i class="fas fa-times"></i> Annuler
                    </a>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Mettre à jour
                    </button>
                </div>
            </div>
        {{ form_end(form) }}
    </div>
</div>

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('js/cooperative_admin_form.js') }}"></script>
{% endblock %}
